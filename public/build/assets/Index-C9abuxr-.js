import{K as S,r as n,j as e,L as k,S as x}from"./app-BkehWb5B.js";import{A as U}from"./app-layout-pvubPwkT.js";import{B as o}from"./createLucideIcon-CMK3J6jR.js";import g from"./UserDialogForm-CBlgDYJ2.js";import{u as y,A as B,a as T,b as E,c as P,d as K,e as O,f as _,g as z,D as H,T as I,S as L,h as R}from"./toaster-D0I_gr-O.js";import{B as F}from"./badge-654GuyCM.js";import{P as M}from"./plus-IpU5vKS-.js";import"./index-5y5CUZCM.js";import"./index-CRHGW8dO.js";import"./index-DcLOV-Uo.js";import"./index-CExDpRuP.js";import"./dropdown-menu-W-xC6Yad.js";import"./jayanusa-DK0lkaAg.js";import"./user-BCDVD3-5.js";import"./book-open-CjIrtR4y.js";import"./file-text-x2PRGwx3.js";import"./chevron-right-C8p0bSju.js";import"./input-BI7jAChD.js";import"./label-B_HyvthM.js";import"./select-D3K6_BH7.js";import"./index-BdQq_4o_.js";import"./dialog-BKn4ydAj.js";function pe(){const{users:a,flash:r}=S().props,[j,c]=n.useState(!1),[m,d]=n.useState(null),[v,f]=n.useState(a!=null&&a.current_page?a.current_page-1:0),[b,l]=n.useState(!1),[p,h]=n.useState(null),{toast:t}=y();n.useEffect(()=>{r!=null&&r.success?t({title:"Berhasil!",description:r.success,variant:"success"}):r!=null&&r.error&&t({title:"Error!",description:r.error,variant:"destructive"})},[r,t]);const N=s=>{h(s),l(!0)},w=()=>{p&&x.delete(route("user.destroy",p),{onSuccess:()=>{t({title:"Berhasil!",description:"User berhasil dihapus",variant:"success"})},onError:()=>{t({title:"Error!",description:"Gagal menghapus user",variant:"destructive"})}}),l(!1),h(null)},D=s=>{f(s),x.get(route("user.index"),{page:s+1},{preserveState:!0})},A=s=>{switch(s){case"dosen":return{variant:"default",className:"bg-red-500 hover:bg-red-600"};case"akademis":return{variant:"default",className:"bg-blue-500 hover:bg-blue-600"};case"mahasiswa":return{variant:"secondary",className:"bg-green-500 hover:bg-green-600"};default:return{variant:"outline",className:""}}},C=[{accessorKey:"name",header:"Nama",cell:({row:s})=>e.jsx("div",{className:"min-w-[150px]",children:s.original.name})},{accessorKey:"username",header:"Username",cell:({row:s})=>e.jsx("div",{className:"min-w-[120px]",children:s.original.username})},{accessorKey:"email",header:"Email",cell:({row:s})=>e.jsx("div",{className:"min-w-[200px]",children:s.original.email})},{accessorKey:"role",header:"Role",cell:({row:s})=>{const i=s.original.role,u=A(i);return e.jsx("div",{className:"min-w-[100px]",children:e.jsx(F,{variant:u.variant,className:u.className,children:i.charAt(0).toUpperCase()+i.slice(1)})})}},{id:"actions",header:"Aksi",cell:({row:s})=>{const i=s.original;return e.jsxs("div",{className:"flex items-center gap-2 min-w-[150px]",children:[e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>d(i),className:"h-8 px-2 text-xs sm:text-sm sm:px-3",children:[e.jsx(L,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),e.jsxs(o,{size:"sm",variant:"destructive",onClick:()=>N(i.id),className:"h-8 px-2 text-xs sm:text-sm sm:px-3",children:[e.jsx(R,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Hapus"})]})]})}}];return e.jsxs(U,{children:[e.jsx(k,{title:"Manajemen User"}),e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:"space-y-1",children:e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Manajemen User"})}),e.jsxs(o,{onClick:()=>c(!0),className:"w-full sm:w-auto whitespace-nowrap",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Tambah User"]})]}),e.jsx(g,{open:j,onOpenChange:c,user:null,onSuccess:()=>{t({title:"Berhasil!",description:"User berhasil ditambahkan",variant:"success"})}}),e.jsx(g,{open:!!m,onOpenChange:s=>!s&&d(null),user:m,onSuccess:()=>{t({title:"Berhasil!",description:"User berhasil diperbarui",variant:"success"})}}),e.jsx(B,{open:b,onOpenChange:l,children:e.jsxs(T,{children:[e.jsxs(E,{children:[e.jsx(P,{children:"Konfirmasi Penghapusan"}),e.jsx(K,{children:"Apakah Anda yakin ingin menghapus user ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(O,{children:[e.jsx(_,{children:"Batal"}),e.jsx(z,{onClick:w,className:"bg-red-500 hover:bg-red-600",children:"Hapus"})]})]})}),e.jsx("div",{style:{width:"100%",overflowX:"auto"},children:a&&e.jsx(H,{columns:C,data:a.data||[],pagination:{pageCount:(a==null?void 0:a.last_page)||0,pageIndex:v,pageSize:(a==null?void 0:a.per_page)||10},onPageChange:D,searchable:!0,searchColumn:"name"})}),e.jsx(I,{})]})]})}export{pe as default};
