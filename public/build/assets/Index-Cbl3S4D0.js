import{r as n,j as e,L as b,S as l}from"./app-CVrlJVTn.js";import{A as C}from"./app-layout-CxY0Y4JW.js";import{B as r}from"./createLucideIcon-F7uUQTux.js";import{D as p,L as S}from"./DialogMateri-BVnYB3QZ.js";import{u as A,A as M,a as T,b as K,c as y,d as B,e as L,f as P,g as z,D as _,T as O,S as E,h as F}from"./toaster-C2wD2dt-.js";import{C as H}from"./chevron-left-DsdmbCq0.js";import{P as I}from"./plus-DnLzjg53.js";import{D as q}from"./download-DzPwWBxu.js";import{F as R}from"./file-text-KNZTiOcy.js";import"./index-wdihxZoD.js";import"./index-DZhT9o8t.js";import"./index-Bn3NJhkC.js";import"./index-DsGqngJC.js";import"./dropdown-menu-koF8GEPZ.js";import"./jayanusa-DK0lkaAg.js";import"./user-Cuib0LVc.js";import"./book-open-DQdVYC9O.js";import"./chevron-right-DM3PbMjN.js";import"./input-C3DAkyol.js";import"./label-CySOt4Zx.js";import"./dialog-I0hF8w0Z.js";function de({matakuliah:i,materi:t}){const[u,c]=n.useState(!1),[d,x]=n.useState(null),[g,j]=n.useState(t!=null&&t.current_page?t.current_page-1:0),[w,m]=n.useState(!1),[h,f]=n.useState(null),{toast:o}=A(),N=s=>{j(s),l.get(route("materi.matakuliah",i.kodematakuliah),{page:s+1},{preserveState:!0,preserveScroll:!0})},k=s=>{f(s),m(!0)},D=()=>{h&&l.delete(route("materi.destroy",h),{onSuccess:()=>{m(!1),o({title:"Berhasil!",description:"Materi berhasil dihapus",variant:"success"})}})},v=[{accessorKey:"namamateri",header:"Nama Materi",cell:({row:s})=>e.jsx("div",{className:"font-medium",children:s.original.namamateri})},{accessorKey:"filemateri",header:"Modul",cell:({row:s})=>{const a=s.original;return a.filemateri?e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>window.open(route("download.materi",a.id),"_blank"),className:"h-8 px-2 text-xs sm:text-sm sm:px-3",children:[e.jsx(q,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Download"})]}):null}},{accessorKey:"linkmateri",header:"Link",cell:({row:s})=>{const a=s.original.linkmateri;return a?e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>window.open(a,"_blank"),className:"h-8 px-2 text-xs sm:text-sm sm:px-3",children:[e.jsx(S,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Buka Link"})]}):null}},{accessorKey:"keterangan",header:"Keterangan",cell:({row:s})=>e.jsx("div",{className:"max-w-[150px] sm:max-w-[200px] lg:max-w-[300px] truncate",children:s.original.keterangan||"-"})},{id:"actions",header:"Aksi",cell:({row:s})=>{const a=s.original;return e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>l.get(route("materi.preview",a.id)),className:"h-8 px-2 text-xs sm:text-sm sm:px-3",children:[e.jsx(R,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Baca"})]}),e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>x(a),className:"h-8 px-2 text-xs sm:text-sm sm:px-3",children:[e.jsx(E,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),e.jsxs(r,{size:"sm",variant:"destructive",onClick:()=>k(a.id),className:"h-8 px-2 text-xs sm:text-sm sm:px-3",children:[e.jsx(F,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Hapus"})]})]})}}];return e.jsxs(C,{children:[e.jsx(b,{title:`Materi - ${i.namamatakuliah}`}),e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(r,{variant:"outline",onClick:()=>l.get(route("materi.index")),className:"mb-2",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Kembali ke Daftar Matakuliah"}),e.jsx("span",{className:"xs:hidden",children:"Kembali"})]}),e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold",children:["Materi ",i.namamatakuliah]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Kode: ",i.kodematakuliah," | SKS: ",i.sks," | Semester: ",i.semester]})]}),e.jsxs(r,{onClick:()=>c(!0),className:"w-full sm:w-auto whitespace-nowrap",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Tambah Materi"]})]}),e.jsx(p,{open:u,onOpenChange:c,materi:null,matakuliah:i,onSuccess:()=>{o({title:"Berhasil!",description:"Materi berhasil ditambahkan",variant:"success"})}}),e.jsx(p,{open:!!d,onOpenChange:s=>!s&&x(null),materi:d,matakuliah:i,onSuccess:()=>{o({title:"Berhasil!",description:"Materi berhasil diperbarui",variant:"success"})}}),e.jsx(M,{open:w,onOpenChange:m,children:e.jsxs(T,{children:[e.jsxs(K,{children:[e.jsx(y,{children:"Konfirmasi Penghapusan"}),e.jsx(B,{children:"Apakah Anda yakin ingin menghapus materi ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(L,{children:[e.jsx(P,{children:"Batal"}),e.jsx(z,{onClick:D,className:"bg-red-500 hover:bg-red-600",children:"Hapus"})]})]})}),e.jsx("div",{className:"overflow-x-auto -mx-3 sm:mx-0 rounded-lg border",children:e.jsx("div",{className:"w-full",children:t&&e.jsx(_,{columns:v,data:t.data,pagination:{pageCount:t.last_page,pageIndex:g,pageSize:t.per_page},onPageChange:N,searchable:!0,searchColumn:"namamateri"})})}),e.jsx(O,{})]})]})}export{de as default};
