import{j as e,m as _,r as C,S as k}from"./app-BkehWb5B.js";import{c as v,a as d,B as b}from"./createLucideIcon-CMK3J6jR.js";import{I as g}from"./input-BI7jAChD.js";import{L as p}from"./label-B_HyvthM.js";import{D as L,a as z,b as T,c as $}from"./dialog-BKn4ydAj.js";import{F as j}from"./file-text-x2PRGwx3.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],q=v("FileUp",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],H=v("Link",E);function P({className:x,...n}){return e.jsx("textarea",{"data-slot":"textarea",className:d("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",x),...n})}function A({open:x,onOpenChange:n,materi:a=null,matakuliah:c,onSuccess:m}){const{data:s,setData:l,processing:f,errors:r,reset:o,progress:h}=_({kodematakuliah:c.kodematakuliah,namamateri:"",filemateri:null,linkmateri:"",keterangan:""});C.useEffect(()=>{a?l({kodematakuliah:a.kodematakuliah,namamateri:a.namamateri||"",filemateri:null,linkmateri:a.linkmateri||"",keterangan:a.keterangan||""}):(o("namamateri","filemateri","linkmateri","keterangan"),l("kodematakuliah",c.kodematakuliah))},[a,l,o,c.kodematakuliah]);const N=i=>{i.preventDefault();const t=new FormData;t.append("kodematakuliah",s.kodematakuliah),t.append("namamateri",s.namamateri),t.append("linkmateri",s.linkmateri?s.linkmateri:""),t.append("keterangan",s.keterangan||""),s.filemateri&&t.append("filemateri",s.filemateri),a?(t.append("_method","PUT"),k.post(route("materi.update",a.id),t,{preserveScroll:!0,onSuccess:()=>{n(!1),o(),m==null||m()}})):k.post(route("materi.store"),t,{preserveScroll:!0,onSuccess:()=>{n(!1),o(),m==null||m()}})},y=i=>{var u;const t=(u=i.target.files)==null?void 0:u[0];if(t){if(t.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan"),i.target.value="";return}const w=new Date().getTime(),M=c.kodematakuliah.replace(/[^a-zA-Z0-9]/g,""),F=s.namamateri.replace(/[^a-zA-Z0-9]/g,""),D=new File([t],`${M}_${F}_${w}.pdf`,{type:t.type});l("filemateri",D)}};return e.jsx(L,{open:x,onOpenChange:i=>{n(i),i||o()},children:e.jsxs(z,{className:"sm:max-w-md",children:[e.jsx(T,{children:e.jsx($,{children:a?"Edit Materi":"Tambah Materi Baru"})}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"namamateri",className:"flex items-center gap-1.5",children:[e.jsx(j,{className:"h-4 w-4"}),"Nama Materi"]}),e.jsx(g,{id:"namamateri",value:s.namamateri,onChange:i=>l("namamateri",i.target.value),className:d("transition-all focus-visible:ring-primary",r.namamateri?"border-red-500 focus-visible:ring-red-500":"")}),r.namamateri&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-red-500"}),r.namamateri]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"filemateri",className:"flex items-center gap-1.5",children:[e.jsx(q,{className:"h-4 w-4"}),"File Materi ",(a==null?void 0:a.filemateri)&&"(Kosongkan jika tidak ingin mengubah)"]}),e.jsx(g,{id:"filemateri",type:"file",onChange:y,className:d("transition-all focus-visible:ring-primary",r.filemateri?"border-red-500 focus-visible:ring-red-500":"")}),h&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all",style:{width:`${h.percentage}%`}})}),r.filemateri&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-red-500"}),r.filemateri]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"linkmateri",className:"flex items-center gap-1.5",children:[e.jsx(H,{className:"h-4 w-4"}),"Link Materi (Opsional)"]}),e.jsx(g,{id:"linkmateri",type:"url",value:s.linkmateri,onChange:i=>l("linkmateri",i.target.value),placeholder:"https://",className:d("transition-all focus-visible:ring-primary",r.linkmateri?"border-red-500 focus-visible:ring-red-500":"")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:'Link video tidak wajib diisi. Jika kosong, akan menampilkan animasi "tidak ada video".'}),r.linkmateri&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-red-500"}),r.linkmateri]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"keterangan",className:"flex items-center gap-1.5",children:[e.jsx(j,{className:"h-4 w-4"}),"Keterangan"]}),e.jsx(P,{id:"keterangan",value:s.keterangan,onChange:i=>l("keterangan",i.target.value),className:d("transition-all focus-visible:ring-primary",r.keterangan?"border-red-500 focus-visible:ring-red-500":""),rows:3}),r.keterangan&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-red-500"}),r.keterangan]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>n(!1),className:"gap-1",children:"Batal"}),e.jsx(b,{type:"submit",disabled:f,className:"gap-1 min-w-24",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Memproses..."]}):e.jsx(e.Fragment,{children:a?"Perbarui":"Simpan"})})]})]})]})})}const J=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as D,H as L,J as a};
