import{r as l,j as e,L as w,$ as y}from"./app-CVrlJVTn.js";import{B as f}from"./createLucideIcon-F7uUQTux.js";import{L as b}from"./jayanusa-DK0lkaAg.js";import{a as g,L as k}from"./tutwuri-CHAfEjnP.js";import{m as t}from"./proxy-DTT2UNQ7.js";import{C as v}from"./chevron-left-DsdmbCq0.js";import{P as j}from"./play-CVRBAgmw.js";import{F as N}from"./file-text-KNZTiOcy.js";import{D as L}from"./download-DzPwWBxu.js";const P=a=>{if(!a)return null;const m=[/(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([^&]+)/i,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([^/?]+)/i,/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([^/?]+)/i,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/live\/([^/?]+)/i];for(const u of m){const n=a.match(u);if(n)return n[1]}return null};function V({materi:a}){const[m,u]=l.useState(!1),[n,x]=l.useState(!1),[h,p]=l.useState(!1),i=l.useRef(null),d=P(a.linkmateri||"");return l.useEffect(()=>{const r=localStorage.getItem("themeMode")||"system";if(r==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",c)}else document.documentElement.classList.toggle("dark",r==="dark");const o=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{r==="system"&&document.documentElement.classList.toggle("dark",o.matches)};return o.addEventListener("change",s),()=>o.removeEventListener("change",s)},[]),l.useEffect(()=>{var r;if(a!=null&&a.linkmateri&&d){if(!window.YT){const s=document.createElement("script");s.src="https://www.youtube.com/iframe_api";const c=document.getElementsByTagName("script")[0];(r=c.parentNode)==null||r.insertBefore(s,c)}const o=()=>{i.current=new window.YT.Player("youtube-player",{videoId:d,height:"100%",width:"100%",playerVars:{rel:0,modestbranding:1,enablejsapi:1},events:{onReady:()=>x(!0),onStateChange:s=>{u(s.data===2||s.data===0)}}})};window.YT&&window.YT.Player?o():window.onYouTubeIframeAPIReady=o}return()=>{i.current&&(i.current.destroy(),i.current=null)}},[a==null?void 0:a.linkmateri,d]),e.jsxs(e.Fragment,{children:[e.jsx(w,{title:`Tonton - ${a.namamateri}`}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 dark:bg-gradient-to-br dark:from-[#1a1a1a] dark:via-[#0f1117] dark:to-black transition-all duration-500",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-400 dark:bg-gradient-to-r dark:from-[#b800e6] dark:via-[#dd00ff] dark:to-[#ff00ff] py-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.2] bg-[size:20px_20px] animate-[pulse_4s_ease-in-out_infinite]"}),e.jsx(t.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"absolute top-4 right-4 z-10",children:e.jsxs(t.div,{className:"bg-white p-2 rounded-lg shadow-md flex items-center gap-2",whileHover:{scale:1.05},children:[e.jsx("img",{src:b,alt:"Logo Jayanusa",className:"h-6 w-auto sm:h-8"}),e.jsx("img",{src:g,alt:"Logo Tutwuri",className:"h-6 w-auto sm:h-8"}),e.jsx("img",{src:k,alt:"Logo Kampus Merdeka",className:"h-6 w-auto sm:h-8"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx(y,{href:route("mahasiswa.materi.list",a.matakuliah.kodematakuliah),children:e.jsxs(f,{variant:"ghost",className:"mb-4 text-white hover:bg-white/20",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Kembali ke Daftar Materi"]})}),e.jsxs(t.div,{className:"space-y-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:a.namamateri}),e.jsxs("p",{className:"text-blue-100 dark:text-purple-100",children:[a.matakuliah.namamatakuliah," (",a.matakuliah.kodematakuliah,")"]})]})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs(t.div,{className:"space-y-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[d&&e.jsx(t.div,{className:"aspect-video rounded-2xl overflow-hidden bg-black shadow-2xl shadow-purple-500/10",whileHover:{scale:1.01},transition:{duration:.3},children:e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("div",{id:"youtube-player",className:"w-full h-full"}),n&&m&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center cursor-pointer",onClick:()=>{i.current&&i.current.playVideo()},children:e.jsx(j,{className:"h-16 w-16 text-white"})})]})}),a.filemateri&&e.jsxs(e.Fragment,{children:[e.jsxs(t.div,{className:"flex gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsxs(f,{className:"bg-gradient-to-r from-blue-600 to-blue-500 dark:from-[#b800e6] dark:to-[#dd00ff] hover:from-blue-700 hover:to-blue-600",onClick:()=>p(!h),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),h?"Tutup PDF":"Buka PDF"]}),e.jsxs(f,{variant:"outline",className:"border-blue-200 dark:border-[#dd00ff]/30 hover:border-blue-500 dark:hover:border-[#dd00ff]",onClick:()=>window.open(route("mahasiswa.materi.download",a.id),"_blank"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Download Materi"]})]}),h&&e.jsx(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"w-full rounded-2xl overflow-hidden shadow-2xl border border-blue-100 dark:border-[#dd00ff]/20",children:e.jsx("div",{className:"relative w-full",style:{height:"800px"},children:e.jsx("iframe",{src:route("mahasiswa.materi.view",a.id),className:"w-full h-full",title:"PDF Viewer"})})})]}),a.keterangan&&e.jsxs(t.div,{className:"prose max-w-none bg-white dark:bg-[#1a1a1a]/80 p-8 rounded-2xl shadow-xl border border-blue-100 dark:border-[#dd00ff]/20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-4",children:"Keterangan"}),e.jsx("p",{className:"text-blue-600 dark:text-[#dd00ff]/80",children:a.keterangan})]})]})})]})]})}export{V as default};
