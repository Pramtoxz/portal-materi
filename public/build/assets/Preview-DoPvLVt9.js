import{r as i,j as s,L as x}from"./app-CCkF9FoQ.js";import{c as f,B as d}from"./createLucideIcon-DV0xQs6u.js";import{P as p}from"./play-CXrI9I17.js";import{F as y}from"./file-text-BSqGqvEm.js";import{D as b}from"./download-Dd7e_TSr.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],k=f("ArrowLeft",j),w=e=>{if(!e)return null;const r=[/(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([^&]+)/i,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([^/?]+)/i,/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([^/?]+)/i,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/live\/([^/?]+)/i];for(const c of r){const l=e.match(c);if(l)return l[1]}return null},u=e=>e?w(e)!==null:!1;function Y({materi:e}){console.log("Materi:",e),console.log("Link Materi:",e.linkmateri),console.log("Is YouTube:",u(e.linkmateri));const[r,c]=i.useState(!1),[l,h]=i.useState(!1),t=i.useRef(null);return i.useEffect(()=>{var o;if(e!=null&&e.linkmateri&&u(e.linkmateri)){if(!window.YT){const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";const n=document.getElementsByTagName("script")[0];(o=n.parentNode)==null||o.insertBefore(a,n)}const m=()=>{const a=w(e.linkmateri);a&&(t.current=new window.YT.Player("youtube-player",{videoId:a,height:"100%",width:"100%",playerVars:{rel:0,modestbranding:1,enablejsapi:1},events:{onReady:()=>h(!0),onStateChange:n=>{c(n.data===2||n.data===0)}}}))};window.YT&&window.YT.Player?m():window.onYouTubeIframeAPIReady=m}return()=>{t.current&&(t.current.destroy(),t.current=null)}},[e==null?void 0:e.linkmateri]),s.jsxs(s.Fragment,{children:[s.jsx(x,{title:`Preview - ${e.namamateri}`}),s.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs(d,{variant:"ghost",onClick:()=>window.history.back(),className:"mb-4",children:[s.jsx(k,{className:"h-4 w-4 mr-2"}),"Kembali"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-bold",children:e.namamateri}),s.jsxs("p",{className:"text-muted-foreground",children:[e.matakuliah.namamatakuliah," (",e.matakuliah.kodematakuliah,")"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:u(e.linkmateri)?s.jsxs("div",{className:"relative aspect-video",children:[s.jsx("div",{id:"youtube-player",className:"w-full h-full"}),l&&r&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center cursor-pointer",onClick:()=>{t.current&&t.current.playVideo()},children:s.jsx(p,{className:"h-16 w-16 text-white"})})]}):null}),e.filemateri&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"File Materi"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(d,{variant:"default",onClick:()=>{const o=route("view.materi",e.id);window.open(o,"_blank")},children:[s.jsx(y,{className:"h-4 w-4 mr-2"}),"Buka PDF"]}),s.jsxs(d,{variant:"outline",onClick:()=>window.open(route("download.materi",e.id),"_blank"),children:[s.jsx(b,{className:"h-4 w-4 mr-2"}),"Download Materi"]})]})]})]})]})]})}export{Y as default};
